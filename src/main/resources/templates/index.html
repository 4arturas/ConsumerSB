<!DOCTYPE html>
<html>
<head>
    <title>Hello WebSocket</title>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="/js/stomp.min.js"></script>
    <script src="/js/app.js"></script>
</head>
<body>
<noscript><h2 style="color: #ff0000">Seems your browser doesn't support Javascript! Websocket relies on Javascript being
    enabled. Please enable
    Javascript and reload this page!</h2></noscript>

<br>
<script type="text/javascript">
    var myStompClient = null;
    function my_Connect()
    {
        var socket = new SockJS('/kafka-websocket');
        myStompClient = Stomp.over( socket );
        myStompClient.connect({}, function( frame )
        {
            my_SetConnected( true );
            console.log( 'Connected: ' + frame );
            myStompClient.subscribe( '/topick/kafka-messages', function( greeting )
            {
                my_ShowGreeting( JSON.parse( greeting.body ).content );
            });
        });
    }
    function my_Disconnect()
    {
        if ( myStompClient !== null )
            myStompClient.disconnect();
        my_SetConnected( false );
        console.log( 'Disconnected' );
    }
    function my_SendMsg()
    {
        myStompClient.send("/app/hello", {}, JSON.stringify({'name': 'test' }));
    }
    function my_SetConnected( connected )
    {

    }
    function my_ShowGreeting( greeting )
    {

    }
    my_Connect();
</script>
<label for="connect">WebSocket connection:</label>
<button id="connect" class="btn btn-default" type="submit">Connect</button>
<button id="disconnect" class="btn btn-default" type="submit" disabled="disabled">Disconnect
</button>

<br>
<br>
<br>

<label for="name">What is your name?</label>
<input type="text" id="name" class="form-control" placeholder="Your name here...">

<button id="send" class="btn btn-default" type="submit">Send</button>


<br>
<br>

<table id="conversation" class="table table-striped">
    <thead>
        <tr>
            <th>Greetings</th>
        </tr>
    </thead>
    <tbody id="greetings">
    </tbody>
</table>

</body>
</html>